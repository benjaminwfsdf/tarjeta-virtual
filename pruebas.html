<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">
  <title>Pong Gold - 2 Jugadores (Vertical)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;user-select:none}
    html,body{width:100%;height:100%;background:#000;color:#FFD700;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;overflow:auto}
    body{display:flex;flex-direction:column;align-items:center;gap:10px;padding:env(safe-area-inset-top) 10px env(safe-area-inset-bottom)}

    .container{width:100%;max-width:800px;display:flex;flex-direction:column;gap:10px}

    .header{text-align:center;padding:6px 10px}
    h1{font-size:2rem;background:linear-gradient(45deg,#FFD700,#FFA500);
       -webkit-background-clip:text;-webkit-text-fill-color:transparent;
       text-shadow:0 0 15px rgba(255,215,0,.5)}
    .subtitle{font-size:.9rem;color:#b8860b}

    .score-board{
      display:flex;justify-content:space-between;gap:10px;align-items:center;width:100%;
      background:linear-gradient(135deg,#1a1a1a,#000);padding:8px 12px;border-radius:10px;border:2px solid #FFD700;
      font-size:1rem;font-weight:bold
    }
    .player-score{display:flex;flex-direction:column;align-items:center}
    .score-label{font-size:.8rem;color:#b8860b;margin-bottom:2px}
    .score-value{font-size:1.4rem;color:#FFD700}

    .controls-top{display:flex;gap:8px;width:100%}
    .btn{flex:1;background:linear-gradient(135deg,#FFD700,#b8860b);border:none;color:#000;
         padding:10px 6px;font-size:.95rem;font-weight:bold;border-radius:8px;cursor:pointer;min-height:46px;
         display:flex;align-items:center;justify-content:center;gap:6px}
    .btn:active{transform:scale(.98)}

    .game-area{position:relative;width:100%}
    canvas{width:100%;height:100%;border:2px solid #FFD700;border-radius:10px;background:#000;display:block}

    /* Controles jugador */
    .player-controls{display:flex;flex-direction:column;align-items:center;margin:10px 0}
    .control-label{font-size:.9rem;color:#d7a315;margin-bottom:8px;text-align:center}
    .arrows{display:flex;gap:14px}
    .arrow-btn{
      width:74px;height:74px;background:linear-gradient(135deg,#1a1a1a,#000);
      border:2px solid #FFD700;border-radius:14px;display:flex;align-items:center;justify-content:center;
      font-size:1.5rem;color:#FFD700;touch-action:none;box-shadow:0 8px 16px rgba(0,0,0,.45);
    }
    .arrow-btn:active{background:linear-gradient(135deg,#FFD700,#b8860b);color:#000}

    .game-over{position:absolute;inset:0;display:none;place-items:center;z-index:100}
    .game-over .panel{background:rgba(0,0,0,.95);padding:18px 16px;border-radius:14px;border:2px solid #FFD700;
                      text-align:center;width:90%;max-width:320px}
    .winner{font-size:1.05rem;margin-bottom:12px;color:#FFD700}

    .particles{position:fixed;inset:0;pointer-events:none;z-index:-1}
    .particle{position:absolute;background:#FFD700;border-radius:50%;opacity:.3;animation:float 15s infinite linear}
    @keyframes float{0%{transform:translateY(100vh) rotate(0)}100%{transform:translateY(-100px) rotate(360deg)}}
  </style>
</head>
<body oncontextmenu="return false">
  <div class="particles" id="particles"></div>

  <div class="container">
    <div class="header">
      <h1>PONG 2 JUGADORES</h1>
      <p class="subtitle">Cada jugador controla desde su lado (flechas arriba y abajo)</p>
    </div>

    <div class="score-board">
      <div class="player-score">
        <div class="score-label">JUGADOR 1 (Arriba)</div>
        <div class="score-value" id="player1-score">0</div>
      </div>
      <div class="player-score">
        <div class="score-label">JUGADOR 2 (Abajo)</div>
        <div class="score-value" id="player2-score">0</div>
      </div>
    </div>

    <div class="controls-top">
      <button class="btn" id="startButton"><i class="fas fa-play"></i> INICIAR</button>
      <button class="btn" id="pauseButton"><i class="fas fa-pause"></i> PAUSAR</button>
      <button class="btn" id="resetButton"><i class="fas fa-undo"></i> REINICIAR</button>
    </div>

    <!-- Controles Jugador 1 arriba -->
    <div class="player-controls">
      <div class="control-label">JUGADOR 1</div>
      <div class="arrows">
        <button class="arrow-btn" id="p1-left"><i class="fas fa-arrow-left"></i></button>
        <button class="arrow-btn" id="p1-right"><i class="fas fa-arrow-right"></i></button>
      </div>
    </div>

    <!-- Canvas -->
    <div class="game-area">
      <canvas id="pongCanvas"></canvas>
      <div class="game-over" id="gameOver">
        <div class="panel">
          <h2>JUEGO TERMINADO</h2>
          <div class="winner" id="winnerMessage"></div>
          <button class="btn" id="restartButton"><i class="fas fa-redo"></i> JUGAR DE NUEVO</button>
        </div>
      </div>
    </div>

    <!-- Controles Jugador 2 abajo -->
    <div class="player-controls">
      <div class="control-label">JUGADOR 2</div>
      <div class="arrows">
        <button class="arrow-btn" id="p2-left"><i class="fas fa-arrow-left"></i></button>
        <button class="arrow-btn" id="p2-right"><i class="fas fa-arrow-right"></i></button>
      </div>
    </div>
  </div>

  <script>
    const canvas=document.getElementById('pongCanvas');
    const ctx=canvas.getContext('2d');
    const s1=document.getElementById('player1-score');
    const s2=document.getElementById('player2-score');
    const startBtn=document.getElementById('startButton');
    const pauseBtn=document.getElementById('pauseButton');
    const resetBtn=document.getElementById('resetButton');
    const gameOver=document.getElementById('gameOver');
    const winnerMsg=document.getElementById('winnerMessage');
    const restartBtn=document.getElementById('restartButton');
    const p1Left=document.getElementById('p1-left'), p1Right=document.getElementById('p1-right');
    const p2Left=document.getElementById('p2-left'), p2Right=document.getElementById('p2-right');

    let p1Score=0, p2Score=0, running=false, paused=false, animId;
    const winningScore=5;
    const paddleHeight=12, ballSize=12, paddleSpeed=9;
    let paddleWidth=120, p1X, p2X, ballX, ballY, vX, vY, initialized=false;

    const controls={ p1:{left:false,right:false}, p2:{left:false,right:false} };

    function resizeCanvas(){
      const w=canvas.parentElement.clientWidth;
      const h=Math.min(window.innerHeight*0.55, w*1.2);
      canvas.width=w; canvas.height=h;
      paddleWidth=Math.max(90, Math.min(w*0.35, 160));
      if(initialized){ draw(); }
    }

    function initGame(){
      p1X=canvas.width/2 - paddleWidth/2;
      p2X=canvas.width/2 - paddleWidth/2;
      resetBall(true); gameOver.style.display='none'; paused=false;
      pauseBtn.innerHTML='<i class="fas fa-pause"></i> PAUSAR';
      initialized=true; draw();
    }
    function resetBall(first=false){
      ballX=canvas.width/2 - ballSize/2;
      ballY=canvas.height/2 - ballSize/2;
      const dirY=(Math.random()>0.5?1:-1);
      vY=dirY*(first?5:6); vX=(Math.random()*2-1)*3.2;
    }
    function startGame(){ if(!running){ if(!initialized) initGame(); running=true; paused=false; loop(); } }
    function togglePause(){ if(!running)return; paused=!paused;
      pauseBtn.innerHTML=paused?'<i class="fas fa-play"></i> REANUDAR':'<i class="fas fa-pause"></i> PAUSAR';
      if(!paused) loop();
    }
    function resetGame(){ p1Score=0;p2Score=0;updateScore();running=false;cancelAnimationFrame(animId);initGame();}
    function restartGame(){ resetGame(); startGame(); }
    function updateScore(){
      s1.textContent=p1Score; s2.textContent=p2Score;
      if(p1Score>=winningScore||p2Score>=winningScore){
        running=false; cancelAnimationFrame(animId);
        winnerMsg.textContent=p1Score>=winningScore?'¡JUGADOR 1 GANA!':'¡JUGADOR 2 GANA!';
        gameOver.style.display='grid';
      }
    }
    function loop(){ if(!running||paused)return; update(); draw(); animId=requestAnimationFrame(loop); }
    function update(){
      if(controls.p1.left) p1X=Math.max(0,p1X-paddleSpeed);
      if(controls.p1.right) p1X=Math.min(canvas.width-paddleWidth,p1X+paddleSpeed);
      if(controls.p2.left) p2X=Math.max(0,p2X-paddleSpeed);
      if(controls.p2.right) p2X=Math.min(canvas.width-paddleWidth,p2X+paddleSpeed);
      ballX+=vX; ballY+=vY;
      if(ballX<=0||ballX>=canvas.width-ballSize) vX=-vX;
      if(ballY<=paddleHeight && ballX+ballSize>p1X && ballX<p1X+paddleWidth){vY=Math.abs(vY);}
      if(ballY+ballSize>=canvas.height-paddleHeight && ballX+ballSize>p2X && ballX<p2X+paddleWidth){vY=-Math.abs(vY);}
      if(ballY<-20){p2Score++;updateScore();resetBall();}
      if(ballY>canvas.height+20){p1Score++;updateScore();resetBall();}
    }
    function draw(){
      ctx.fillStyle='#000';ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.setLineDash([6,10]);ctx.beginPath();ctx.moveTo(0,canvas.height/2);ctx.lineTo(canvas.width,canvas.height/2);
      ctx.strokeStyle='#FFD700';ctx.stroke();ctx.setLineDash([]);
      ctx.fillStyle='#FFD700';ctx.fillRect(p1X,0,paddleWidth,paddleHeight);
      ctx.fillStyle='#b8860b';ctx.fillRect(p2X,canvas.height-paddleHeight,paddleWidth,paddleHeight);
      ctx.fillStyle='#FFD700';ctx.beginPath();ctx.arc(ballX+ballSize/2,ballY+ballSize/2,ballSize/2,0,Math.PI*2);ctx.fill();
    }
    function bind(btn,on,off){btn.addEventListener('pointerdown',e=>{e.preventDefault();btn.setPointerCapture(e.pointerId);on();startGame();});
      btn.addEventListener('pointerup',()=>off());btn.addEventListener('lostpointercapture',()=>off());}
    bind(p1Left,()=>controls.p1.left=true,()=>controls.p1.left=false);
    bind(p1Right,()=>controls.p1.right=true,()=>controls.p1.right=false);
    bind(p2Left,()=>controls.p2.left=true,()=>controls.p2.left=false);
    bind(p2Right,()=>controls.p2.right=true,()=>controls.p2.right=false);

    startBtn.addEventListener('click',()=>startGame());
    pauseBtn.addEventListener('click',()=>togglePause());
    resetBtn.addEventListener('click',()=>resetGame());
    restartBtn.addEventListener('click',()=>restartGame());

    window.addEventListener('load',()=>{resizeCanvas();initGame();});
    window.addEventListener('resize',resizeCanvas);
  </script>
</body>
</html>